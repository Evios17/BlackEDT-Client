<!DOCTYPE html>
<html>
<head>
    <title>Affichage du contenu d'un dossier</title>
    <style>
        #folder-content {
            display: flex;
            flex-wrap: wrap;
        }

        .folder-button {
            margin: 5px;
            padding: 10px;
            border: 1px solid black;
            cursor: pointer;
        }
    </style>
</head>
<body>
<h1>Contenu du dossier</h1>
<div id="folder-content">
    <!-- Ici, les boutons du dossier seront générés dynamiquement -->
</div>

<button id="btn-prev" style="display:none;">Précédent</button>

<script>
    // Objet représentant le dossier
    var rootFolder = {
        name: "Dossier principal",
        subfolders: [
            {
                name: "Sous-dossier 1",
                subfolders: [
                    {
                        name: "Sous-sous-dossier 1.1",
                        subfolders: []
                    },
                    {
                        name: "Sous-sous-dossier 1.2",
                        subfolders: []
                    }
                ]
            },
            {
                name: "Sous-dossier 2",
                subfolders: [
                    {
                        name: "Sous-sous-dossier 2.1",
                        subfolders: [
                            {
                                name: "Sous-sous-sous-dossier 2.1.1",
                                subfolders: []
                            }
                        ]
                    }
                ]
            }
        ]
    };

    var currentFolder = rootFolder;

    // Fonction pour générer les boutons de dossier récursivement
    function generateFolderButtons(folder, parentElement) {
        for (var i = 0; i < folder.subfolders.length; i++) {
            var subfolder = folder.subfolders[i];
            var button = document.createElement("button");
            button.innerHTML = subfolder.name;
            button.className = "folder-button";
            button.addEventListener("click", function() {
                // Lorsque le bouton est cliqué, on supprime le contenu existant et on génère les nouveaux boutons pour le sous-dossier
                document.getElementById("folder-content").innerHTML = "";
                generateFolderButtons(subfolder, document.getElementById("folder-content"));

                // Afficher le bouton "Précédent" si le sous-dossier n'est pas la racine
                if (currentFolder !== rootFolder) {
                    document.getElementById("btn-prev").style.display = "block";
                }
            });
            parentElement.appendChild(button);
        }
    }

    // Générer les boutons du dossier principal
    generateFolderButtons(rootFolder, document.getElementById("folder-content"));

    // Gérer le bouton "Précédent"
    document.getElementById("btn-prev").addEventListener("click", function() {
        // Supprimer le contenu existant
        document.getElementById("folder-content").innerHTML = "";

        // Définir le dossier actuel sur le dossier parent
        currentFolder = getParentFolder(rootFolder, currentFolder);

        // Régénérer les boutons du dossier parent
        generateFolderButtons(currentFolder, document.getElementById("folder-content"));

        // Masquer le bouton "Précédent" si nous sommes de retour au dossier principal
        if (currentFolder === rootFolder) {
            document.getElementById("btn-prev").style.display = "none";
        }
    });

    // Fonction pour obtenir le dossier parent
    function getParentFolder(root, folder) {
        var parent = null;
        traverse(root, function(node) {
            if (node.subfolders.includes(folder)) {
                parent = node;
            }
        });
        return parent;
    }

    // Fonction de parcours récursif pour trouver le dossier
    function traverse(folder, callback) {
        callback(folder);
        for (var i = 0; i < folder.subfolders.length; i++) {
            traverse(folder.subfolders[i], callback);
        }
    }
</script>
</body>
</html>
